/* 
NOTE: Alterations to Docsy typically use a "td" namespace,
styles which utilize this should be commented to make it clear
what the workaround is for
*/

// GLOBAL

.grpc-banner {
  width: 100%;
  position: fixed;
  margin-left: -15px;
  z-index: 32;
  top: 4rem;
  background: $gray-100;
  text-align: center;

  & p {
    padding: 0.5rem;
  }
}

.modal--trigger {
  cursor: pointer;
}

// Workarounds for external link icons
a:not(.td-sidebar-link) > .fa-external-link-alt::before {
  margin-left: 3px;
}
a > .fa-external-link-alt::before {
  font-size: 50%;
  opacity: 0.8;
  vertical-align: top;
}

/*
Docsy's 'cover/block' option for setting background images does
not currrently support svg's. This sets the background on hero
sections site wide to the original site's background svg.
*/
.td-cover-block {
  background-image: url("/img/graphic-04.svg");
}

// NAVBAR

// Docsy includes the site name by default. This is in place
// to hide the span text, leaving only the logo svg
.td-navbar .navbar-brand span:last-child {
  display: none;
}

// PAGES

.grpc-homepage {
  margin-left: auto;
  margin-right: auto;
  max-width: 1140px;
}

.grpc-homepage__logo {
  width: 100%;
}

.grpc-homepage__cncf-logo {
  margin-left: auto;
  margin-right: auto;
  max-width: 500px;
}

.grpc-homepage__icon {
  width: 50%;
  margin-left: auto;
  margin-right: auto;
  margin-bottom: 1rem;
}

.grpc-about__user-logo {
  max-height: 5rem;
}

@media screen and (min-width: 540px) {
  .homepage-features {
    padding-right: 3rem;
    padding-left: 3rem;
  }
}

@media screen and (min-width: 768px) {
  .grpc-homepage__user-logo {
    max-height: 7rem;
  }
}

@media screen and (min-width: 992px) {
  .grpc-homepage__logo {
    width: 50%;
  }

  .grpc-homepage__icon {
    margin-right: 1rem;
    max-width: 172px;
  }
}

// DOCS

// Extend the sidebar to the end of the visible page.
.td-toc {
  height: calc(100vh - 5rem);
}

// Custom in-page toc. Apply this class as a modifier on top of the Docsy-provided .td-toc
.td-toc--inline {
  padding-top: 0;
  padding-bottom: 0;
  border-left: none;
  position: static;
  height: auto;

  & + .td-content {
    margin-top: 1.5rem;
  }

  // Workaround to prevent the first three entries from being hidden
  & #td-content__toc.collapse:not(.show) {
    display: block;
    overflow: hidden;
    min-height: 5rem;
    height: 5rem;

    & + #td-content__toc-link--expanded::before {
      content: "â€¦";
    }
  }

  & #td-content__toc.collapsing {
    height: 5rem;
  }

  & #td-content__toc.collapse.show + #td-content__toc-link--expanded::before {
    content: "\2303";
  }
}

#td-content__toc-link span i.fa-chevron-up {
  transition: transform 250ms ease-in-out;
}

#td-content__toc-link[aria-expanded="true"] span i.fa-chevron-up {
  transform: rotate(-180deg);
}

#td-content__toc-link--expanded {
  background-color: $gray-200;
}

// Prevent overflow on mobile devices in case of very long inline-block elements.
.td-content {
  word-break: break-word;
  max-width: 1140px;
}

/* To ensure that the top page header and description are rendered
above the inline ToC, this hides them from displaying in the main
content block */
body:not(.td-blog) .td-content:not(.list-page) {
  & h1:first-child {
    display: none;
  }

  & div.lead {
    display: none;
  }
}

// Spacing fix for page-meta-links. Whitespace in template is stripped in production.
.td-page-meta a i {
  margin-right: 0.25rem;
}

// Fix to give rendered images width to match Docsy 
@media screen and (min-width: 992px) {
  .td-content figure {
    max-width: 80%;
  }
}

// Language Home Pages
.prog-lang-home__list {
  & h4 {
    margin-bottom: 0.75rem;
  }

  & ul {
    padding-left: 0.25rem;
    padding-bottom: 0.5rem;
    list-style: none;
  }

  & li {
    padding-bottom: 0.25rem;
  }
}